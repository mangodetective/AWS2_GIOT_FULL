{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arh05\\\\AWS2_GIOT_FULL\\\\frontend\\\\src\\\\pages\\\\Chatbot\\\\ChatbotScreen.tsx\",\n  _s = $RefreshSig$();\n// ChatbotScreen.tsx - 챗봇 화면 컴포넌트\n// 최상단에 추가\n\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { Bell, User, ChevronLeft, Printer, Star, Trash2, Paperclip, Send, MoreHorizontal, MessageCircle } from 'lucide-react';\nimport { ChatbotAPI, ChatbotUtils } from '../../services/ChatbotTypes';\nimport { DashboardAPI } from '../../services/DashboardTypes';\nimport styles from \"./ChatbotScreen.module.css\";\nimport sidebarStyles from \"../Dashboard/Sidebar.module.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n// 사이드바 아이템 컴포넌트\nconst SidebarItem = ({\n  icon,\n  label,\n  isActive,\n  onClick\n}) => /*#__PURE__*/_jsxDEV(\"button\", {\n  onClick: onClick,\n  className: `${sidebarStyles.sidebarItem} ${isActive ? sidebarStyles.sidebarItemActive : ''}`,\n  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n    children: icon\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 33,\n  columnNumber: 3\n}, this);\n\n// 타이핑 인디케이터 컴포넌트\n_c = SidebarItem;\nconst TypingIndicator = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `${styles.chatbotMessageItem} ${styles.bot}`,\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${styles.chatbotMessageAvatar} ${styles.bot}`,\n    children: \"AWS\\xB2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.chatbotTypingIndicator,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.chatbotTypingBubble,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatbotTypingDot\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatbotTypingDot\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatbotTypingDot\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 44,\n  columnNumber: 3\n}, this);\n\n// 메시지 아이템 컴포넌트\n_c2 = TypingIndicator;\nconst MessageItem = ({\n  message\n}) => {\n  const isBot = message.sender === 'bot';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${styles.chatbotMessageItem} ${styles[message.sender]}`,\n    children: [isBot && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${styles.chatbotMessageAvatar} ${styles.bot}`,\n      children: \"AWS\\xB2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.chatbotMessageBubble,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${styles.chatbotMessageContent} ${styles[message.sender]}`,\n        children: [message.message.split('\\n').map((line, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: [line, index < message.message.split('\\n').length - 1 && /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 66\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this)), isBot && message.sensorData && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chatbotSensorData,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotSensorItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uC628\\uB3C4:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [message.sensorData.temperature, \"\\xB0C\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotSensorItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uC2B5\\uB3C4:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [message.sensorData.humidity, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotSensorItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uAC00\\uC2A4\\uB18D\\uB3C4:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [message.sensorData.gasConcentration, \"ppm\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${styles.chatbotMessageMeta} ${styles[message.sender]}`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.chatbotMessageTime,\n          children: ChatbotUtils.formatTime(message.timestamp)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chatbotMessageActions,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.chatbotMessageActionButton,\n            children: /*#__PURE__*/_jsxDEV(MoreHorizontal, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), !isBot && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${styles.chatbotMessageAvatar} ${styles.user}`,\n      children: \"A\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n\n// 알림 드롭다운 컴포넌트 (Dashboard에서 재사용)\n_c3 = MessageItem;\nconst NotificationDropdown = ({\n  isOpen,\n  onClose,\n  notifications\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.dropdown,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.dropdownHeader,\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: styles.dropdownTitle,\n          children: \"\\uC54C\\uB9BC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.notificationList,\n        children: notifications.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.emptyNotification,\n          children: \"\\uC0C8\\uB85C\\uC6B4 \\uC54C\\uB9BC\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this) : notifications.map(notification => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${styles.notificationItem} ${!notification.read ? styles.notificationItemUnread : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.notificationMessage,\n            children: notification.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.notificationTimestamp,\n            children: notification.timestamp\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 17\n          }, this)]\n        }, notification.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onClose,\n      className: styles.dropdownOverlay,\n      \"aria-label\": \"\\uC54C\\uB9BC \\uB2EB\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n// 관리자 드롭다운 컴포넌트 (Dashboard에서 재사용)\n_c4 = NotificationDropdown;\nconst AdminDropdown = ({\n  isOpen,\n  onClose\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.adminDropdown,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.adminDropdownContent,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.adminDropdownItem,\n          children: \"\\uD504\\uB85C\\uD544 \\uC124\\uC815\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.adminDropdownItem,\n          children: \"\\uACC4\\uC815 \\uAD00\\uB9AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.adminDropdownDivider\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${styles.adminDropdownItem} ${styles.adminDropdownLogout}`,\n          children: \"\\uB85C\\uADF8\\uC544\\uC6C3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onClose,\n      className: styles.dropdownOverlay,\n      \"aria-label\": \"\\uAD00\\uB9AC\\uC790 \\uBA54\\uB274 \\uB2EB\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_c5 = AdminDropdown;\nconst ChatbotScreen = ({\n  onNavigateBack,\n  onNavigateToRole\n}) => {\n  _s();\n  const [activeMenu, setActiveMenu] = useState('Chatbot');\n\n  // 메뉴 클릭 핸들러\n  const handleMenuClick = (label, path) => {\n    switch (label) {\n      case 'History':\n        setActiveMenu(label); // 히스토리면 상태만 업데이트\n        break;\n      case 'Dashboard':\n        onNavigateBack(); // 대시보드로 돌아가기\n        break;\n      case 'Logout':\n        onNavigateToRole === null || onNavigateToRole === void 0 ? void 0 : onNavigateToRole(); // 역할 선택 화면으로\n        break;\n      default:\n        setActiveMenu(label); // 기타 메뉴는 상태 업데이트\n        break;\n    }\n  };\n  const [chatbotState, setChatbotState] = useState({\n    messages: [],\n    isLoading: false,\n    isTyping: false,\n    inputMessage: '',\n    error: null,\n    modelStatus: 'Active'\n  });\n  const [notificationData, setNotificationData] = useState({\n    count: 0,\n    notifications: []\n  });\n  const [isNotificationOpen, setIsNotificationOpen] = useState(false);\n  const [isAdminMenuOpen, setIsAdminMenuOpen] = useState(false);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n\n  // 메시지 영역 스크롤을 맨 아래로\n  const scrollToBottom = useCallback(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, []);\n\n  // 메시지 전송\n  const sendMessage = useCallback(async () => {\n    const message = chatbotState.inputMessage.trim();\n\n    // 메시지 검증\n    const validation = ChatbotUtils.validateMessage(message);\n    if (!validation.isValid) {\n      setChatbotState(prev => ({\n        ...prev,\n        error: validation.error || null\n      }));\n      return;\n    }\n\n    // 사용자 메시지 추가\n    const userMessage = {\n      id: ChatbotUtils.generateMessageId(),\n      message,\n      sender: 'user',\n      timestamp: new Date().toISOString()\n    };\n    setChatbotState(prev => ({\n      ...prev,\n      messages: [...prev.messages, userMessage],\n      inputMessage: '',\n      isLoading: true,\n      isTyping: true,\n      error: null\n    }));\n    try {\n      // API 호출 (개발 시에는 목 응답 사용)\n      const response = await ChatbotAPI.generateMockResponse(message);\n      if ('success' in response && response.success) {\n        // 타이핑 효과를 위한 지연\n        const typingDelay = ChatbotUtils.calculateTypingDelay(response.reply);\n        setTimeout(() => {\n          const botMessage = {\n            id: ChatbotUtils.generateMessageId(),\n            message: response.reply,\n            sender: 'bot',\n            timestamp: response.timestamp,\n            sensorData: response.sensorData,\n            status: response.status\n          };\n          setChatbotState(prev => ({\n            ...prev,\n            messages: [...prev.messages, botMessage],\n            isLoading: false,\n            isTyping: false\n          }));\n        }, typingDelay);\n      } else {\n        const msg = 'error' in response ? response.error : 'Unknown error';\n        throw new Error(msg);\n      }\n    } catch (error) {\n      setChatbotState(prev => ({\n        ...prev,\n        isLoading: false,\n        isTyping: false,\n        error: error instanceof Error ? error.message : '답변을 생성할 수 없습니다.'\n      }));\n    }\n  }, [chatbotState.inputMessage]);\n\n  // 입력 필드 변경 핸들러\n  const handleInputChange = useCallback(e => {\n    const value = e.target.value;\n    if (value.length <= 300) {\n      setChatbotState(prev => ({\n        ...prev,\n        inputMessage: value,\n        error: null\n      }));\n    }\n  }, []);\n\n  // 키보드 이벤트 핸들러\n  const handleKeyDown = useCallback(e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      if (!chatbotState.isLoading && chatbotState.inputMessage.trim()) {\n        sendMessage();\n      }\n    }\n  }, [chatbotState.isLoading, chatbotState.inputMessage, sendMessage]);\n\n  // 알림 데이터 가져오기\n  const fetchNotifications = useCallback(async () => {\n    try {\n      const data = await DashboardAPI.getNotifications();\n      setNotificationData(data);\n    } catch (error) {\n      console.error('알림 데이터 가져오기 실패:', error);\n    }\n  }, []);\n\n  // 컴포넌트 마운트 시 초기화\n  useEffect(() => {\n    // 환영 메시지 추가\n    const welcomeMessage = ChatbotUtils.createWelcomeMessage();\n    setChatbotState(prev => ({\n      ...prev,\n      messages: [welcomeMessage]\n    }));\n\n    // 알림 데이터 가져오기\n    fetchNotifications();\n\n    // 입력 필드에 포커스\n    setTimeout(() => {\n      var _inputRef$current;\n      (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n    }, 100);\n  }, [fetchNotifications]);\n\n  // 메시지 추가 시 스크롤\n  useEffect(() => {\n    scrollToBottom();\n  }, [chatbotState.messages, chatbotState.isTyping, scrollToBottom]);\n\n  // 메시지 히스토리 저장\n  useEffect(() => {\n    if (chatbotState.messages.length > 0) {\n      ChatbotUtils.saveMessageHistory(chatbotState.messages);\n    }\n  }, [chatbotState.messages]);\n  const canSend = chatbotState.inputMessage.trim().length > 0 && !chatbotState.isLoading;\n  const charCount = chatbotState.inputMessage.length;\n  const charCountClass = charCount > 250 ? 'error' : charCount > 200 ? 'warning' : '';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: sidebarStyles.sidebar,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: sidebarStyles.logoSection,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: sidebarStyles.logoContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.logoMain,\n            children: \"AWS\\xB2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.logoAccent,\n            children: \"GIoT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: sidebarStyles.logoSubtext,\n          children: \"IoT Cloud System\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: sidebarStyles.navigation,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: sidebarStyles.sidebarItem,\n          onClick: onNavigateBack,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${sidebarStyles.sidebarItem} ${sidebarStyles.sidebarItemActive}`,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Chatbot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: sidebarStyles.sidebarItem,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: sidebarStyles.sidebarItem,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Settings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: sidebarStyles.sidebarItem,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: sidebarStyles.sidebarFooter,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: sidebarStyles.footerText,\n          children: \"2025 GBSA AWS\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.mainContent,\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: styles.header,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.headerContent,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: styles.headerTitle,\n              children: \"Chatbot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.headerSubtitle,\n              children: new Date().toLocaleString('ko-KR')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.headerActions,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.notificationContainer,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setIsNotificationOpen(!isNotificationOpen);\n                  setIsAdminMenuOpen(false);\n                },\n                className: styles.notificationButton,\n                children: [/*#__PURE__*/_jsxDEV(Bell, {\n                  size: 24\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 19\n                }, this), notificationData.count > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: styles.notificationBadge,\n                  children: notificationData.count > 99 ? '99+' : notificationData.count\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(NotificationDropdown, {\n                isOpen: isNotificationOpen,\n                onClose: () => setIsNotificationOpen(false),\n                notifications: notificationData.notifications\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.adminContainer,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setIsAdminMenuOpen(!isAdminMenuOpen);\n                  setIsNotificationOpen(false);\n                },\n                className: styles.adminButton,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.adminAvatar,\n                  children: /*#__PURE__*/_jsxDEV(User, {\n                    size: 18,\n                    style: {\n                      color: 'white'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: styles.adminLabel,\n                  children: \"Admin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(AdminDropdown, {\n                isOpen: isAdminMenuOpen,\n                onClose: () => setIsAdminMenuOpen(false)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatbotContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chatbotHeader,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotHeaderLeft,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.chatbotBackButton,\n              onClick: onNavigateBack,\n              \"aria-label\": \"\\uB4A4\\uB85C \\uAC00\\uAE30\",\n              children: /*#__PURE__*/_jsxDEV(ChevronLeft, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.chatbotModelInfo,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.chatbotModelName,\n                children: \"Model Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.chatbotModelStatus,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `${styles.chatbotStatusBadge} ${styles[`chatbotStatus${chatbotState.modelStatus}`]}`,\n                  children: chatbotState.modelStatus\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotHeaderActions,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.chatbotActionButton,\n              \"aria-label\": \"\\uC778\\uC1C4\",\n              children: /*#__PURE__*/_jsxDEV(Printer, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.chatbotActionButton,\n              \"aria-label\": \"\\uC990\\uACA8\\uCC3E\\uAE30\",\n              children: /*#__PURE__*/_jsxDEV(Star, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.chatbotActionButton,\n              \"aria-label\": \"\\uC0AD\\uC81C\",\n              children: /*#__PURE__*/_jsxDEV(Trash2, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chatbotMessagesContainer,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotMessages,\n            children: [chatbotState.messages.map(message => /*#__PURE__*/_jsxDEV(MessageItem, {\n              message: message\n            }, message.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this)), chatbotState.isTyping && /*#__PURE__*/_jsxDEV(TypingIndicator, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 11\n        }, this), chatbotState.error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chatbotErrorMessage,\n          children: chatbotState.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chatbotInputContainer,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotInputWrapper,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.chatbotAttachButton,\n              \"aria-label\": \"\\uD30C\\uC77C \\uCCA8\\uBD80\",\n              children: /*#__PURE__*/_jsxDEV(Paperclip, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'relative',\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                ref: inputRef,\n                className: styles.chatbotInputField,\n                value: chatbotState.inputMessage,\n                onChange: handleInputChange,\n                onKeyDown: handleKeyDown,\n                placeholder: \"Write message\",\n                rows: 1,\n                disabled: chatbotState.isLoading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 520,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `${styles.chatbotCharCounter} ${charCountClass}`,\n                children: [charCount, \"/300\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 530,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.chatbotSendButton,\n              onClick: sendMessage,\n              disabled: !canSend,\n              \"aria-label\": \"\\uBA54\\uC2DC\\uC9C0 \\uC804\\uC1A1\",\n              children: /*#__PURE__*/_jsxDEV(Send, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 355,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatbotScreen, \"CCqas9+Mt+eOs/3qlNwDZryRrAE=\");\n_c6 = ChatbotScreen;\nexport default ChatbotScreen;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"SidebarItem\");\n$RefreshReg$(_c2, \"TypingIndicator\");\n$RefreshReg$(_c3, \"MessageItem\");\n$RefreshReg$(_c4, \"NotificationDropdown\");\n$RefreshReg$(_c5, \"AdminDropdown\");\n$RefreshReg$(_c6, \"ChatbotScreen\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","Bell","User","ChevronLeft","Printer","Star","Trash2","Paperclip","Send","MoreHorizontal","MessageCircle","ChatbotAPI","ChatbotUtils","DashboardAPI","styles","sidebarStyles","jsxDEV","_jsxDEV","Fragment","_Fragment","SidebarItem","icon","label","isActive","onClick","className","sidebarItem","sidebarItemActive","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","TypingIndicator","chatbotMessageItem","bot","chatbotMessageAvatar","chatbotTypingIndicator","chatbotTypingBubble","chatbotTypingDot","_c2","MessageItem","message","isBot","sender","chatbotMessageBubble","chatbotMessageContent","split","map","line","index","length","sensorData","chatbotSensorData","chatbotSensorItem","temperature","humidity","gasConcentration","chatbotMessageMeta","chatbotMessageTime","formatTime","timestamp","chatbotMessageActions","chatbotMessageActionButton","size","user","_c3","NotificationDropdown","isOpen","onClose","notifications","dropdown","dropdownHeader","dropdownTitle","notificationList","emptyNotification","notification","notificationItem","read","notificationItemUnread","notificationMessage","notificationTimestamp","id","dropdownOverlay","_c4","AdminDropdown","adminDropdown","adminDropdownContent","adminDropdownItem","adminDropdownDivider","adminDropdownLogout","_c5","ChatbotScreen","onNavigateBack","onNavigateToRole","_s","activeMenu","setActiveMenu","handleMenuClick","path","chatbotState","setChatbotState","messages","isLoading","isTyping","inputMessage","error","modelStatus","notificationData","setNotificationData","count","isNotificationOpen","setIsNotificationOpen","isAdminMenuOpen","setIsAdminMenuOpen","messagesEndRef","inputRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","sendMessage","trim","validation","validateMessage","isValid","prev","userMessage","generateMessageId","Date","toISOString","response","generateMockResponse","success","typingDelay","calculateTypingDelay","reply","setTimeout","botMessage","status","msg","Error","handleInputChange","e","value","target","handleKeyDown","key","shiftKey","preventDefault","fetchNotifications","data","getNotifications","console","welcomeMessage","createWelcomeMessage","_inputRef$current","focus","saveMessageHistory","canSend","charCount","charCountClass","container","sidebar","logoSection","logoContainer","logoMain","logoAccent","logoSubtext","navigation","sidebarFooter","footerText","mainContent","header","headerContent","headerTitle","headerSubtitle","toLocaleString","headerActions","notificationContainer","notificationButton","notificationBadge","adminContainer","adminButton","adminAvatar","style","color","adminLabel","chatbotContainer","chatbotHeader","chatbotHeaderLeft","chatbotBackButton","chatbotModelInfo","chatbotModelName","chatbotModelStatus","chatbotStatusBadge","chatbotHeaderActions","chatbotActionButton","chatbotMessagesContainer","chatbotMessages","ref","chatbotErrorMessage","chatbotInputContainer","chatbotInputWrapper","chatbotAttachButton","position","flex","chatbotInputField","onChange","onKeyDown","placeholder","rows","disabled","chatbotCharCounter","chatbotSendButton","_c6","$RefreshReg$"],"sources":["C:/Users/arh05/AWS2_GIOT_FULL/frontend/src/pages/Chatbot/ChatbotScreen.tsx"],"sourcesContent":["// ChatbotScreen.tsx - 챗봇 화면 컴포넌트\r\n// 최상단에 추가\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { \r\n  Bell, \r\n  User, \r\n  ChevronLeft, \r\n  ChevronDown,\r\n  Printer, \r\n  Star, \r\n  Trash2, \r\n  Paperclip, \r\n  Send,\r\n  MoreHorizontal,\r\n  MessageCircle\r\n} from 'lucide-react';\r\nimport { ChatbotState, ChatMessage, ChatbotAPI, ChatbotUtils } from '../../services/ChatbotTypes';\r\nimport { NotificationData, DashboardAPI, SidebarItemProps} from '../../services/DashboardTypes';\r\nimport styles from \"./ChatbotScreen.module.css\";\r\nimport sidebarStyles from \"../Dashboard/Sidebar.module.css\";\r\n\r\ninterface ChatbotScreenProps {\r\n  onNavigateBack: () => void;\r\n  onNavigateToHistory: () => void;\r\n  onNavigateToRole?: () => void;\r\n\r\n}\r\n\r\n\r\n// 사이드바 아이템 컴포넌트\r\nconst SidebarItem: React.FC<SidebarItemProps> = ({ icon, label, isActive, onClick }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`${sidebarStyles.sidebarItem} ${isActive ? sidebarStyles.sidebarItemActive : ''}`}\r\n  >\r\n    <span>{icon}</span>\r\n    <span>{label}</span>\r\n  </button>\r\n);\r\n\r\n// 타이핑 인디케이터 컴포넌트\r\nconst TypingIndicator: React.FC = () => (\r\n  <div className={`${styles.chatbotMessageItem} ${styles.bot}`}>\r\n    <div className={`${styles.chatbotMessageAvatar} ${styles.bot}`}>AWS²</div>\r\n    <div className={styles.chatbotTypingIndicator}>\r\n      <div className={styles.chatbotTypingBubble}>\r\n        <div className={styles.chatbotTypingDot}></div>\r\n        <div className={styles.chatbotTypingDot}></div>\r\n        <div className={styles.chatbotTypingDot}></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// 메시지 아이템 컴포넌트\r\nconst MessageItem: React.FC<{ message: ChatMessage }> = ({ message }) => {\r\n  const isBot = message.sender === 'bot';\r\n  \r\n  return (\r\n    <div className={`${styles.chatbotMessageItem} ${styles[message.sender]}`}>\r\n      {isBot && (\r\n        <div className={`${styles.chatbotMessageAvatar} ${styles.bot}`}>AWS²</div>\r\n      )}\r\n      \r\n      <div className={styles.chatbotMessageBubble}>\r\n        <div className={`${styles.chatbotMessageContent} ${styles[message.sender]}`}>\r\n          {message.message.split('\\n').map((line, index) => (\r\n            <React.Fragment key={index}>\r\n              {line}\r\n              {index < message.message.split('\\n').length - 1 && <br />}\r\n            </React.Fragment>\r\n          ))}\r\n          \r\n          {/* 센서 데이터 표시 (봇 메시지인 경우) */}\r\n          {isBot && message.sensorData && (\r\n            <div className={styles.chatbotSensorData}>\r\n              <div className={styles.chatbotSensorItem}>\r\n                <span>온도:</span>\r\n                <span>{message.sensorData.temperature}°C</span>\r\n              </div>\r\n              <div className={styles.chatbotSensorItem}>\r\n                <span>습도:</span>\r\n                <span>{message.sensorData.humidity}%</span>\r\n              </div>\r\n              <div className={styles.chatbotSensorItem}>\r\n                <span>가스농도:</span>\r\n                <span>{message.sensorData.gasConcentration}ppm</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        <div className={`${styles.chatbotMessageMeta} ${styles[message.sender]}`}>\r\n          <span className={styles.chatbotMessageTime}>\r\n            {ChatbotUtils.formatTime(message.timestamp)}\r\n          </span>\r\n          <div className={styles.chatbotMessageActions}>\r\n            <button className={styles.chatbotMessageActionButton}>\r\n              <MoreHorizontal size={12} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {!isBot && (\r\n        <div className={`${styles.chatbotMessageAvatar} ${styles.user}`}>A</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// 알림 드롭다운 컴포넌트 (Dashboard에서 재사용)\r\nconst NotificationDropdown: React.FC<{ \r\n  isOpen: boolean; \r\n  onClose: () => void; \r\n  notifications: NotificationData['notifications'];\r\n}> = ({ isOpen, onClose, notifications }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.dropdown}>\r\n        <div className={styles.dropdownHeader}>\r\n          <h3 className={styles.dropdownTitle}>알림</h3>\r\n        </div>\r\n        <div className={styles.notificationList}>\r\n          {notifications.length === 0 ? (\r\n            <div className={styles.emptyNotification}>새로운 알림이 없습니다</div>\r\n          ) : (\r\n            notifications.map((notification) => (\r\n              <div \r\n                key={notification.id} \r\n                className={`${styles.notificationItem} ${!notification.read ? styles.notificationItemUnread : ''}`}\r\n              >\r\n                <p className={styles.notificationMessage}>{notification.message}</p>\r\n                <p className={styles.notificationTimestamp}>{notification.timestamp}</p>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n      <button \r\n        onClick={onClose}\r\n        className={styles.dropdownOverlay}\r\n        aria-label=\"알림 닫기\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\n// 관리자 드롭다운 컴포넌트 (Dashboard에서 재사용)\r\nconst AdminDropdown: React.FC<{ isOpen: boolean; onClose: () => void }> = ({ isOpen, onClose }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.adminDropdown}>\r\n        <div className={styles.adminDropdownContent}>\r\n          <button className={styles.adminDropdownItem}>프로필 설정</button>\r\n          <button className={styles.adminDropdownItem}>계정 관리</button>\r\n          <div className={styles.adminDropdownDivider} />\r\n          <button className={`${styles.adminDropdownItem} ${styles.adminDropdownLogout}`}>로그아웃</button>\r\n        </div>\r\n      </div>\r\n      <button \r\n        onClick={onClose}\r\n        className={styles.dropdownOverlay}\r\n        aria-label=\"관리자 메뉴 닫기\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nconst ChatbotScreen: React.FC<ChatbotScreenProps> = ({ onNavigateBack, onNavigateToRole }) => {\r\n  const [activeMenu, setActiveMenu] = useState('Chatbot');\r\n\r\n  // 메뉴 클릭 핸들러\r\n  const handleMenuClick = (label: string, path?: string) => {\r\n    switch (label) {\r\n    case 'History':\r\n      setActiveMenu(label); // 히스토리면 상태만 업데이트\r\n      break;\r\n    case 'Dashboard':\r\n      onNavigateBack(); // 대시보드로 돌아가기\r\n      break;\r\n    case 'Logout':\r\n      onNavigateToRole?.();  // 역할 선택 화면으로\r\n      break;\r\n    default:\r\n      setActiveMenu(label); // 기타 메뉴는 상태 업데이트\r\n      break;\r\n    }\r\n  };\r\n\r\n  const [chatbotState, setChatbotState] = useState<ChatbotState>({\r\n    messages: [],\r\n    isLoading: false,\r\n    isTyping: false,\r\n    inputMessage: '',\r\n    error: null,\r\n    modelStatus: 'Active'\r\n  });\r\n\r\n  const [notificationData, setNotificationData] = useState<NotificationData>({\r\n    count: 0,\r\n    notifications: []\r\n  });\r\n  \r\n  const [isNotificationOpen, setIsNotificationOpen] = useState(false);\r\n  const [isAdminMenuOpen, setIsAdminMenuOpen] = useState(false);\r\n\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  // 메시지 영역 스크롤을 맨 아래로\r\n  const scrollToBottom = useCallback(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, []);\r\n\r\n  // 메시지 전송\r\n  const sendMessage = useCallback(async () => {\r\n    const message = chatbotState.inputMessage.trim();\r\n    \r\n    // 메시지 검증\r\n    const validation = ChatbotUtils.validateMessage(message);\r\n    if (!validation.isValid) {\r\n      setChatbotState(prev => ({ ...prev, error: validation.error || null }));\r\n      return;\r\n    }\r\n\r\n    // 사용자 메시지 추가\r\n    const userMessage: ChatMessage = {\r\n      id: ChatbotUtils.generateMessageId(),\r\n      message,\r\n      sender: 'user',\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    setChatbotState(prev => ({\r\n      ...prev,\r\n      messages: [...prev.messages, userMessage],\r\n      inputMessage: '',\r\n      isLoading: true,\r\n      isTyping: true,\r\n      error: null\r\n    }));\r\n\r\n    try {\r\n      // API 호출 (개발 시에는 목 응답 사용)\r\n      const response = await ChatbotAPI.generateMockResponse(message);\r\n      \r\n      if ('success' in response && response.success) {\r\n        // 타이핑 효과를 위한 지연\r\n        const typingDelay = ChatbotUtils.calculateTypingDelay(response.reply);\r\n        \r\n        setTimeout(() => {\r\n          const botMessage: ChatMessage = {\r\n            id: ChatbotUtils.generateMessageId(),\r\n            message: response.reply,\r\n            sender: 'bot',\r\n            timestamp: response.timestamp,\r\n            sensorData: response.sensorData,\r\n            status: response.status\r\n          };\r\n\r\n          setChatbotState(prev => ({\r\n            ...prev,\r\n            messages: [...prev.messages, botMessage],\r\n            isLoading: false,\r\n            isTyping: false\r\n          }));\r\n        }, typingDelay);\r\n      } else {\r\n  const msg = 'error' in response ? response.error : 'Unknown error';\r\n  throw new Error(msg);\r\n}\r\n    } catch (error) {\r\n      setChatbotState(prev => ({\r\n        ...prev,\r\n        isLoading: false,\r\n        isTyping: false,\r\n        error: error instanceof Error ? error.message : '답변을 생성할 수 없습니다.'\r\n      }));\r\n    }\r\n  }, [chatbotState.inputMessage]);\r\n\r\n  // 입력 필드 변경 핸들러\r\n  const handleInputChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    const value = e.target.value;\r\n    if (value.length <= 300) {\r\n      setChatbotState(prev => ({ \r\n        ...prev, \r\n        inputMessage: value,\r\n        error: null \r\n      }));\r\n    }\r\n  }, []);\r\n\r\n  // 키보드 이벤트 핸들러\r\n  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      if (!chatbotState.isLoading && chatbotState.inputMessage.trim()) {\r\n        sendMessage();\r\n      }\r\n    }\r\n  }, [chatbotState.isLoading, chatbotState.inputMessage, sendMessage]);\r\n\r\n  // 알림 데이터 가져오기\r\n  const fetchNotifications = useCallback(async () => {\r\n    try {\r\n      const data = await DashboardAPI.getNotifications();\r\n      setNotificationData(data);\r\n    } catch (error) {\r\n      console.error('알림 데이터 가져오기 실패:', error);\r\n    }\r\n  }, []);\r\n\r\n  // 컴포넌트 마운트 시 초기화\r\n  useEffect(() => {\r\n    // 환영 메시지 추가\r\n    const welcomeMessage = ChatbotUtils.createWelcomeMessage();\r\n    setChatbotState(prev => ({\r\n      ...prev,\r\n      messages: [welcomeMessage]\r\n    }));\r\n\r\n    // 알림 데이터 가져오기\r\n    fetchNotifications();\r\n\r\n    // 입력 필드에 포커스\r\n    setTimeout(() => {\r\n      inputRef.current?.focus();\r\n    }, 100);\r\n  }, [fetchNotifications]);\r\n\r\n  // 메시지 추가 시 스크롤\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [chatbotState.messages, chatbotState.isTyping, scrollToBottom]);\r\n\r\n  // 메시지 히스토리 저장\r\n  useEffect(() => {\r\n    if (chatbotState.messages.length > 0) {\r\n      ChatbotUtils.saveMessageHistory(chatbotState.messages);\r\n    }\r\n  }, [chatbotState.messages]);\r\n\r\n  const canSend = chatbotState.inputMessage.trim().length > 0 && !chatbotState.isLoading;\r\n  const charCount = chatbotState.inputMessage.length;\r\n  const charCountClass = charCount > 250 ? 'error' : charCount > 200 ? 'warning' : '';\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      {/* 사이드바 */}\r\n      <div className={sidebarStyles.sidebar}>\r\n        <div className={sidebarStyles.logoSection}>\r\n          <div className={sidebarStyles.logoContainer}>\r\n            <div className={styles.logoMain}>AWS²</div>\r\n            <div className={styles.logoAccent}>GIoT</div>\r\n          </div>\r\n          <div className={sidebarStyles.logoSubtext}>IoT Cloud System</div>\r\n        </div>\r\n\r\n        <nav className={sidebarStyles.navigation}>\r\n          <button className={sidebarStyles.sidebarItem} onClick={onNavigateBack}>\r\n            <span><MessageCircle size={20} /></span>\r\n            <span>Dashboard</span>\r\n          </button>\r\n          <button className={`${sidebarStyles.sidebarItem} ${sidebarStyles.sidebarItemActive}`}>\r\n            <span><MessageCircle size={20} /></span>\r\n            <span>Chatbot</span>\r\n          </button>\r\n          <button className={sidebarStyles.sidebarItem}>\r\n            <span><MessageCircle size={20} /></span>\r\n            <span>History</span>\r\n          </button>\r\n          <button className={sidebarStyles.sidebarItem}>\r\n            <span><MessageCircle size={20} /></span>\r\n            <span>Settings</span>\r\n          </button>\r\n          <button className={sidebarStyles.sidebarItem}>\r\n            <span><MessageCircle size={20} /></span>\r\n            <span>Logout</span>\r\n          </button>\r\n        </nav>\r\n\r\n        <div className={sidebarStyles.sidebarFooter}>\r\n          <div className={sidebarStyles.footerText}>2025 GBSA AWS</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 메인 컨텐츠 영역 */}\r\n      <div className={styles.mainContent}>\r\n        {/* 상단 헤더 */}\r\n        <header className={styles.header}>\r\n          <div className={styles.headerContent}>\r\n            <div>\r\n              <h1 className={styles.headerTitle}>Chatbot</h1>\r\n              <p className={styles.headerSubtitle}>{new Date().toLocaleString('ko-KR')}</p>\r\n            </div>\r\n            \r\n            <div className={styles.headerActions}>\r\n              {/* 알림 아이콘 */}\r\n              <div className={styles.notificationContainer}>\r\n                <button\r\n                  onClick={() => {\r\n                    setIsNotificationOpen(!isNotificationOpen);\r\n                    setIsAdminMenuOpen(false);\r\n                  }}\r\n                  className={styles.notificationButton}\r\n                >\r\n                  <Bell size={24} />\r\n                  {notificationData.count > 0 && (\r\n                    <span className={styles.notificationBadge}>\r\n                      {notificationData.count > 99 ? '99+' : notificationData.count}\r\n                    </span>\r\n                  )}\r\n                </button>\r\n                \r\n                <NotificationDropdown\r\n                  isOpen={isNotificationOpen}\r\n                  onClose={() => setIsNotificationOpen(false)}\r\n                  notifications={notificationData.notifications}\r\n                />\r\n              </div>\r\n\r\n              {/* 관리자 프로필 */}\r\n              <div className={styles.adminContainer}>\r\n                <button\r\n                  onClick={() => {\r\n                    setIsAdminMenuOpen(!isAdminMenuOpen);\r\n                    setIsNotificationOpen(false);\r\n                  }}\r\n                  className={styles.adminButton}\r\n                >\r\n                  <div className={styles.adminAvatar}>\r\n                    <User size={18} style={{ color: 'white' }} />\r\n                  </div>\r\n                  <span className={styles.adminLabel}>Admin</span>\r\n                </button>\r\n                \r\n                <AdminDropdown\r\n                  isOpen={isAdminMenuOpen}\r\n                  onClose={() => setIsAdminMenuOpen(false)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {/* 챗봇 메인 영역 */}\r\n        <div className={styles.chatbotContainer}>\r\n          {/* 챗봇 헤더 */}\r\n          <div className={styles.chatbotHeader}>\r\n            <div className={styles.chatbotHeaderLeft}>\r\n              <button \r\n                className={styles.chatbotBackButton}\r\n                onClick={onNavigateBack}\r\n                aria-label=\"뒤로 가기\"\r\n              >\r\n                <ChevronLeft size={20} />\r\n              </button>\r\n              \r\n              <div className={styles.chatbotModelInfo}>\r\n                <div className={styles.chatbotModelName}>Model Name</div>\r\n                <div className={styles.chatbotModelStatus}>\r\n                  <span className={`${styles.chatbotStatusBadge} ${styles[`chatbotStatus${chatbotState.modelStatus}`]}`}>\r\n                    {chatbotState.modelStatus}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className={styles.chatbotHeaderActions}>\r\n              <button className={styles.chatbotActionButton} aria-label=\"인쇄\">\r\n                <Printer size={18} />\r\n              </button>\r\n              <button className={styles.chatbotActionButton} aria-label=\"즐겨찾기\">\r\n                <Star size={18} />\r\n              </button>\r\n              <button className={styles.chatbotActionButton} aria-label=\"삭제\">\r\n                <Trash2 size={18} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* 메시지 영역 */}\r\n          <div className={styles.chatbotMessagesContainer}>\r\n            <div className={styles.chatbotMessages}>\r\n              {chatbotState.messages.map((message) => (\r\n                <MessageItem key={message.id} message={message} />\r\n              ))}\r\n              \r\n              {chatbotState.isTyping && <TypingIndicator />}\r\n              \r\n              <div ref={messagesEndRef} />\r\n            </div>\r\n          </div>\r\n\r\n          {/* 에러 메시지 */}\r\n          {chatbotState.error && (\r\n            <div className={styles.chatbotErrorMessage}>\r\n              {chatbotState.error}\r\n            </div>\r\n          )}\r\n\r\n          {/* 입력 영역 */}\r\n          <div className={styles.chatbotInputContainer}>\r\n            <div className={styles.chatbotInputWrapper}>\r\n              <button \r\n                className={styles.chatbotAttachButton}\r\n                aria-label=\"파일 첨부\"\r\n              >\r\n                <Paperclip size={18} />\r\n              </button>\r\n              \r\n              <div style={{ position: 'relative', flex: 1 }}>\r\n                <textarea\r\n                  ref={inputRef}\r\n                  className={styles.chatbotInputField}\r\n                  value={chatbotState.inputMessage}\r\n                  onChange={handleInputChange}\r\n                  onKeyDown={handleKeyDown}\r\n                  placeholder=\"Write message\"\r\n                  rows={1}\r\n                  disabled={chatbotState.isLoading}\r\n                />\r\n                <div className={`${styles.chatbotCharCounter} ${charCountClass}`}>\r\n                  {charCount}/300\r\n                </div>\r\n              </div>\r\n              \r\n              <button \r\n                className={styles.chatbotSendButton}\r\n                onClick={sendMessage}\r\n                disabled={!canSend}\r\n                aria-label=\"메시지 전송\"\r\n              >\r\n                <Send size={18} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatbotScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}