{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arh05\\\\AWS2_GIOT_FULL\\\\frontend\\\\src\\\\pages\\\\Chatbot\\\\ChatbotScreen.tsx\",\n  _s = $RefreshSig$();\n// ChatbotScreen.tsx - 챗봇 화면 컴포넌트\n// 최상단에 추가\n\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { Bell, User, ChevronLeft, Printer, Star, Trash2, Paperclip, Send, MoreHorizontal, MessageCircle } from 'lucide-react';\nimport { ChatbotAPI, ChatbotUtils } from '../../services/ChatbotTypes';\nimport { DashboardAPI } from '../../services/DashboardTypes';\nimport styles from \"./ChatbotScreen.module.css\";\nimport sidebarStyles from \"../Dashboard/Sidebar.module.css\";\n\n// 메뉴 클릭 핸들러\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst handleMenuClick = (label, path) => {\n  var _onNavigateToRole;\n  switch (label) {\n    case 'Chatbot':\n      onNavigateToChatbot();\n      break;\n    case 'History':\n      setActiveMenu(label); // 히스토리면 상태만 업데이트\n      break;\n    case 'Dashboard':\n      onNavigateBack(); // 대시보드로 돌아가기\n      break;\n    case 'Logout':\n      (_onNavigateToRole = onNavigateToRole) === null || _onNavigateToRole === void 0 ? void 0 : _onNavigateToRole(); // 역할 선택 화면으로\n      break;\n    default:\n      setActiveMenu(label); // 기타 메뉴는 상태 업데이트\n      break;\n  }\n};\n\n// 사이드바 아이템 컴포넌트\nconst SidebarItem = ({\n  icon,\n  label,\n  isActive,\n  onClick\n}) => /*#__PURE__*/_jsxDEV(\"button\", {\n  onClick: onClick,\n  className: `${sidebarStyles.sidebarItem} ${isActive ? sidebarStyles.sidebarItemActive : ''}`,\n  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n    children: icon\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 46,\n  columnNumber: 3\n}, this);\n\n// 타이핑 인디케이터 컴포넌트\n_c = SidebarItem;\nconst TypingIndicator = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `${styles.chatbotMessageItem} ${styles.bot}`,\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${styles.chatbotMessageAvatar} ${styles.bot}`,\n    children: \"AWS\\xB2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.chatbotTypingIndicator,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.chatbotTypingBubble,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatbotTypingDot\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatbotTypingDot\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatbotTypingDot\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 57,\n  columnNumber: 3\n}, this);\n\n// 메시지 아이템 컴포넌트\n_c2 = TypingIndicator;\nconst MessageItem = ({\n  message\n}) => {\n  const isBot = message.sender === 'bot';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${styles.chatbotMessageItem} ${styles[message.sender]}`,\n    children: [isBot && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${styles.chatbotMessageAvatar} ${styles.bot}`,\n      children: \"AWS\\xB2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.chatbotMessageBubble,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${styles.chatbotMessageContent} ${styles[message.sender]}`,\n        children: [message.message.split('\\n').map((line, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: [line, index < message.message.split('\\n').length - 1 && /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 66\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)), isBot && message.sensorData && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chatbotSensorData,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotSensorItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uC628\\uB3C4:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [message.sensorData.temperature, \"\\xB0C\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotSensorItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uC2B5\\uB3C4:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [message.sensorData.humidity, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotSensorItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uAC00\\uC2A4\\uB18D\\uB3C4:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [message.sensorData.gasConcentration, \"ppm\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${styles.chatbotMessageMeta} ${styles[message.sender]}`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.chatbotMessageTime,\n          children: ChatbotUtils.formatTime(message.timestamp)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chatbotMessageActions,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.chatbotMessageActionButton,\n            children: /*#__PURE__*/_jsxDEV(MoreHorizontal, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), !isBot && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${styles.chatbotMessageAvatar} ${styles.user}`,\n      children: \"A\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n\n// 알림 드롭다운 컴포넌트 (Dashboard에서 재사용)\n_c3 = MessageItem;\nconst NotificationDropdown = ({\n  isOpen,\n  onClose,\n  notifications\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.dropdown,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.dropdownHeader,\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: styles.dropdownTitle,\n          children: \"\\uC54C\\uB9BC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.notificationList,\n        children: notifications.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.emptyNotification,\n          children: \"\\uC0C8\\uB85C\\uC6B4 \\uC54C\\uB9BC\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this) : notifications.map(notification => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${styles.notificationItem} ${!notification.read ? styles.notificationItemUnread : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.notificationMessage,\n            children: notification.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.notificationTimestamp,\n            children: notification.timestamp\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 17\n          }, this)]\n        }, notification.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onClose,\n      className: styles.dropdownOverlay,\n      \"aria-label\": \"\\uC54C\\uB9BC \\uB2EB\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n// 관리자 드롭다운 컴포넌트 (Dashboard에서 재사용)\n_c4 = NotificationDropdown;\nconst AdminDropdown = ({\n  isOpen,\n  onClose\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.adminDropdown,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.adminDropdownContent,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.adminDropdownItem,\n          children: \"\\uD504\\uB85C\\uD544 \\uC124\\uC815\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.adminDropdownItem,\n          children: \"\\uACC4\\uC815 \\uAD00\\uB9AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.adminDropdownDivider\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${styles.adminDropdownItem} ${styles.adminDropdownLogout}`,\n          children: \"\\uB85C\\uADF8\\uC544\\uC6C3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onClose,\n      className: styles.dropdownOverlay,\n      \"aria-label\": \"\\uAD00\\uB9AC\\uC790 \\uBA54\\uB274 \\uB2EB\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_c5 = AdminDropdown;\nconst ChatbotScreen = ({\n  onNavigateBack\n}) => {\n  _s();\n  const [chatbotState, setChatbotState] = useState({\n    messages: [],\n    isLoading: false,\n    isTyping: false,\n    inputMessage: '',\n    error: null,\n    modelStatus: 'Active'\n  });\n  const [notificationData, setNotificationData] = useState({\n    count: 0,\n    notifications: []\n  });\n  const [isNotificationOpen, setIsNotificationOpen] = useState(false);\n  const [isAdminMenuOpen, setIsAdminMenuOpen] = useState(false);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n\n  // 메시지 영역 스크롤을 맨 아래로\n  const scrollToBottom = useCallback(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, []);\n\n  // 메시지 전송\n  const sendMessage = useCallback(async () => {\n    const message = chatbotState.inputMessage.trim();\n\n    // 메시지 검증\n    const validation = ChatbotUtils.validateMessage(message);\n    if (!validation.isValid) {\n      setChatbotState(prev => ({\n        ...prev,\n        error: validation.error || null\n      }));\n      return;\n    }\n\n    // 사용자 메시지 추가\n    const userMessage = {\n      id: ChatbotUtils.generateMessageId(),\n      message,\n      sender: 'user',\n      timestamp: new Date().toISOString()\n    };\n    setChatbotState(prev => ({\n      ...prev,\n      messages: [...prev.messages, userMessage],\n      inputMessage: '',\n      isLoading: true,\n      isTyping: true,\n      error: null\n    }));\n    try {\n      // API 호출 (개발 시에는 목 응답 사용)\n      const response = await ChatbotAPI.generateMockResponse(message);\n      if ('success' in response && response.success) {\n        // 타이핑 효과를 위한 지연\n        const typingDelay = ChatbotUtils.calculateTypingDelay(response.reply);\n        setTimeout(() => {\n          const botMessage = {\n            id: ChatbotUtils.generateMessageId(),\n            message: response.reply,\n            sender: 'bot',\n            timestamp: response.timestamp,\n            sensorData: response.sensorData,\n            status: response.status\n          };\n          setChatbotState(prev => ({\n            ...prev,\n            messages: [...prev.messages, botMessage],\n            isLoading: false,\n            isTyping: false\n          }));\n        }, typingDelay);\n      } else {\n        const msg = 'error' in response ? response.error : 'Unknown error';\n        throw new Error(msg);\n      }\n    } catch (error) {\n      setChatbotState(prev => ({\n        ...prev,\n        isLoading: false,\n        isTyping: false,\n        error: error instanceof Error ? error.message : '답변을 생성할 수 없습니다.'\n      }));\n    }\n  }, [chatbotState.inputMessage]);\n\n  // 입력 필드 변경 핸들러\n  const handleInputChange = useCallback(e => {\n    const value = e.target.value;\n    if (value.length <= 300) {\n      setChatbotState(prev => ({\n        ...prev,\n        inputMessage: value,\n        error: null\n      }));\n    }\n  }, []);\n\n  // 키보드 이벤트 핸들러\n  const handleKeyDown = useCallback(e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      if (!chatbotState.isLoading && chatbotState.inputMessage.trim()) {\n        sendMessage();\n      }\n    }\n  }, [chatbotState.isLoading, chatbotState.inputMessage, sendMessage]);\n\n  // 알림 데이터 가져오기\n  const fetchNotifications = useCallback(async () => {\n    try {\n      const data = await DashboardAPI.getNotifications();\n      setNotificationData(data);\n    } catch (error) {\n      console.error('알림 데이터 가져오기 실패:', error);\n    }\n  }, []);\n\n  // 컴포넌트 마운트 시 초기화\n  useEffect(() => {\n    // 환영 메시지 추가\n    const welcomeMessage = ChatbotUtils.createWelcomeMessage();\n    setChatbotState(prev => ({\n      ...prev,\n      messages: [welcomeMessage]\n    }));\n\n    // 알림 데이터 가져오기\n    fetchNotifications();\n\n    // 입력 필드에 포커스\n    setTimeout(() => {\n      var _inputRef$current;\n      (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n    }, 100);\n  }, [fetchNotifications]);\n\n  // 메시지 추가 시 스크롤\n  useEffect(() => {\n    scrollToBottom();\n  }, [chatbotState.messages, chatbotState.isTyping, scrollToBottom]);\n\n  // 메시지 히스토리 저장\n  useEffect(() => {\n    if (chatbotState.messages.length > 0) {\n      ChatbotUtils.saveMessageHistory(chatbotState.messages);\n    }\n  }, [chatbotState.messages]);\n  const canSend = chatbotState.inputMessage.trim().length > 0 && !chatbotState.isLoading;\n  const charCount = chatbotState.inputMessage.length;\n  const charCountClass = charCount > 250 ? 'error' : charCount > 200 ? 'warning' : '';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: sidebarStyles.sidebar,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: sidebarStyles.logoSection,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: sidebarStyles.logoContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.logoMain,\n            children: \"AWS\\xB2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.logoAccent,\n            children: \"GIoT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: sidebarStyles.logoSubtext,\n          children: \"IoT Cloud System\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: sidebarStyles.navigation,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: sidebarStyles.sidebarItem,\n          onClick: onNavigateBack,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${sidebarStyles.sidebarItem} ${sidebarStyles.sidebarItemActive}`,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Chatbot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: sidebarStyles.sidebarItem,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: sidebarStyles.sidebarItem,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Settings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: sidebarStyles.sidebarItem,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: sidebarStyles.sidebarFooter,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: sidebarStyles.footerText,\n          children: \"2025 GBSA AWS\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.mainContent,\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: styles.header,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.headerContent,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: styles.headerTitle,\n              children: \"Chatbot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.headerSubtitle,\n              children: new Date().toLocaleString('ko-KR')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.headerActions,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.notificationContainer,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setIsNotificationOpen(!isNotificationOpen);\n                  setIsAdminMenuOpen(false);\n                },\n                className: styles.notificationButton,\n                children: [/*#__PURE__*/_jsxDEV(Bell, {\n                  size: 24\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 19\n                }, this), notificationData.count > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: styles.notificationBadge,\n                  children: notificationData.count > 99 ? '99+' : notificationData.count\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(NotificationDropdown, {\n                isOpen: isNotificationOpen,\n                onClose: () => setIsNotificationOpen(false),\n                notifications: notificationData.notifications\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.adminContainer,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setIsAdminMenuOpen(!isAdminMenuOpen);\n                  setIsNotificationOpen(false);\n                },\n                className: styles.adminButton,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.adminAvatar,\n                  children: /*#__PURE__*/_jsxDEV(User, {\n                    size: 18,\n                    style: {\n                      color: 'white'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: styles.adminLabel,\n                  children: \"Admin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(AdminDropdown, {\n                isOpen: isAdminMenuOpen,\n                onClose: () => setIsAdminMenuOpen(false)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chatbotContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chatbotHeader,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotHeaderLeft,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.chatbotBackButton,\n              onClick: onNavigateBack,\n              \"aria-label\": \"\\uB4A4\\uB85C \\uAC00\\uAE30\",\n              children: /*#__PURE__*/_jsxDEV(ChevronLeft, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.chatbotModelInfo,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.chatbotModelName,\n                children: \"Model Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.chatbotModelStatus,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `${styles.chatbotStatusBadge} ${styles[`chatbotStatus${chatbotState.modelStatus}`]}`,\n                  children: chatbotState.modelStatus\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotHeaderActions,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.chatbotActionButton,\n              \"aria-label\": \"\\uC778\\uC1C4\",\n              children: /*#__PURE__*/_jsxDEV(Printer, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.chatbotActionButton,\n              \"aria-label\": \"\\uC990\\uACA8\\uCC3E\\uAE30\",\n              children: /*#__PURE__*/_jsxDEV(Star, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.chatbotActionButton,\n              \"aria-label\": \"\\uC0AD\\uC81C\",\n              children: /*#__PURE__*/_jsxDEV(Trash2, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chatbotMessagesContainer,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotMessages,\n            children: [chatbotState.messages.map(message => /*#__PURE__*/_jsxDEV(MessageItem, {\n              message: message\n            }, message.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this)), chatbotState.isTyping && /*#__PURE__*/_jsxDEV(TypingIndicator, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 11\n        }, this), chatbotState.error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chatbotErrorMessage,\n          children: chatbotState.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.chatbotInputContainer,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.chatbotInputWrapper,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.chatbotAttachButton,\n              \"aria-label\": \"\\uD30C\\uC77C \\uCCA8\\uBD80\",\n              children: /*#__PURE__*/_jsxDEV(Paperclip, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'relative',\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                ref: inputRef,\n                className: styles.chatbotInputField,\n                value: chatbotState.inputMessage,\n                onChange: handleInputChange,\n                onKeyDown: handleKeyDown,\n                placeholder: \"Write message\",\n                rows: 1,\n                disabled: chatbotState.isLoading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 520,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `${styles.chatbotCharCounter} ${charCountClass}`,\n                children: [charCount, \"/300\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 530,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.chatbotSendButton,\n              onClick: sendMessage,\n              disabled: !canSend,\n              \"aria-label\": \"\\uBA54\\uC2DC\\uC9C0 \\uC804\\uC1A1\",\n              children: /*#__PURE__*/_jsxDEV(Send, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 355,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatbotScreen, \"g5zZhLMMxpofdxDYl6wh5iAPNQw=\");\n_c6 = ChatbotScreen;\nexport default ChatbotScreen;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"SidebarItem\");\n$RefreshReg$(_c2, \"TypingIndicator\");\n$RefreshReg$(_c3, \"MessageItem\");\n$RefreshReg$(_c4, \"NotificationDropdown\");\n$RefreshReg$(_c5, \"AdminDropdown\");\n$RefreshReg$(_c6, \"ChatbotScreen\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","Bell","User","ChevronLeft","Printer","Star","Trash2","Paperclip","Send","MoreHorizontal","MessageCircle","ChatbotAPI","ChatbotUtils","DashboardAPI","styles","sidebarStyles","jsxDEV","_jsxDEV","Fragment","_Fragment","handleMenuClick","label","path","_onNavigateToRole","onNavigateToChatbot","setActiveMenu","onNavigateBack","onNavigateToRole","SidebarItem","icon","isActive","onClick","className","sidebarItem","sidebarItemActive","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","TypingIndicator","chatbotMessageItem","bot","chatbotMessageAvatar","chatbotTypingIndicator","chatbotTypingBubble","chatbotTypingDot","_c2","MessageItem","message","isBot","sender","chatbotMessageBubble","chatbotMessageContent","split","map","line","index","length","sensorData","chatbotSensorData","chatbotSensorItem","temperature","humidity","gasConcentration","chatbotMessageMeta","chatbotMessageTime","formatTime","timestamp","chatbotMessageActions","chatbotMessageActionButton","size","user","_c3","NotificationDropdown","isOpen","onClose","notifications","dropdown","dropdownHeader","dropdownTitle","notificationList","emptyNotification","notification","notificationItem","read","notificationItemUnread","notificationMessage","notificationTimestamp","id","dropdownOverlay","_c4","AdminDropdown","adminDropdown","adminDropdownContent","adminDropdownItem","adminDropdownDivider","adminDropdownLogout","_c5","ChatbotScreen","_s","chatbotState","setChatbotState","messages","isLoading","isTyping","inputMessage","error","modelStatus","notificationData","setNotificationData","count","isNotificationOpen","setIsNotificationOpen","isAdminMenuOpen","setIsAdminMenuOpen","messagesEndRef","inputRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","sendMessage","trim","validation","validateMessage","isValid","prev","userMessage","generateMessageId","Date","toISOString","response","generateMockResponse","success","typingDelay","calculateTypingDelay","reply","setTimeout","botMessage","status","msg","Error","handleInputChange","e","value","target","handleKeyDown","key","shiftKey","preventDefault","fetchNotifications","data","getNotifications","console","welcomeMessage","createWelcomeMessage","_inputRef$current","focus","saveMessageHistory","canSend","charCount","charCountClass","container","sidebar","logoSection","logoContainer","logoMain","logoAccent","logoSubtext","navigation","sidebarFooter","footerText","mainContent","header","headerContent","headerTitle","headerSubtitle","toLocaleString","headerActions","notificationContainer","notificationButton","notificationBadge","adminContainer","adminButton","adminAvatar","style","color","adminLabel","chatbotContainer","chatbotHeader","chatbotHeaderLeft","chatbotBackButton","chatbotModelInfo","chatbotModelName","chatbotModelStatus","chatbotStatusBadge","chatbotHeaderActions","chatbotActionButton","chatbotMessagesContainer","chatbotMessages","ref","chatbotErrorMessage","chatbotInputContainer","chatbotInputWrapper","chatbotAttachButton","position","flex","chatbotInputField","onChange","onKeyDown","placeholder","rows","disabled","chatbotCharCounter","chatbotSendButton","_c6","$RefreshReg$"],"sources":["C:/Users/arh05/AWS2_GIOT_FULL/frontend/src/pages/Chatbot/ChatbotScreen.tsx"],"sourcesContent":["// ChatbotScreen.tsx - 챗봇 화면 컴포넌트\r\n// 최상단에 추가\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { \r\n  Bell, \r\n  User, \r\n  ChevronLeft, \r\n  ChevronDown,\r\n  Printer, \r\n  Star, \r\n  Trash2, \r\n  Paperclip, \r\n  Send,\r\n  MoreHorizontal,\r\n  MessageCircle\r\n} from 'lucide-react';\r\nimport { ChatbotState, ChatMessage, ChatbotAPI, ChatbotUtils } from '../../services/ChatbotTypes';\r\nimport { NotificationData, DashboardAPI, SidebarItemProps} from '../../services/DashboardTypes';\r\nimport styles from \"./ChatbotScreen.module.css\";\r\nimport sidebarStyles from \"../Dashboard/Sidebar.module.css\";\r\n\r\n// 메뉴 클릭 핸들러\r\n  const handleMenuClick = (label: string, path: string) => {\r\n    switch (label) {\r\n    case 'Chatbot':\r\n      onNavigateToChatbot();\r\n      break;\r\n    case 'History':\r\n      setActiveMenu(label); // 히스토리면 상태만 업데이트\r\n      break;\r\n    case 'Dashboard':\r\n      onNavigateBack(); // 대시보드로 돌아가기\r\n      break;\r\n    case 'Logout':\r\n      onNavigateToRole?.();  // 역할 선택 화면으로\r\n      break;\r\n    default:\r\n      setActiveMenu(label); // 기타 메뉴는 상태 업데이트\r\n      break;\r\n    }\r\n  };\r\n\r\n// 사이드바 아이템 컴포넌트\r\nconst SidebarItem: React.FC<SidebarItemProps> = ({ icon, label, isActive, onClick }) => (\r\n  <button\r\n    onClick={onClick}\r\n    className={`${sidebarStyles.sidebarItem} ${isActive ? sidebarStyles.sidebarItemActive : ''}`}\r\n  >\r\n    <span>{icon}</span>\r\n    <span>{label}</span>\r\n  </button>\r\n);\r\n\r\n// 타이핑 인디케이터 컴포넌트\r\nconst TypingIndicator: React.FC = () => (\r\n  <div className={`${styles.chatbotMessageItem} ${styles.bot}`}>\r\n    <div className={`${styles.chatbotMessageAvatar} ${styles.bot}`}>AWS²</div>\r\n    <div className={styles.chatbotTypingIndicator}>\r\n      <div className={styles.chatbotTypingBubble}>\r\n        <div className={styles.chatbotTypingDot}></div>\r\n        <div className={styles.chatbotTypingDot}></div>\r\n        <div className={styles.chatbotTypingDot}></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// 메시지 아이템 컴포넌트\r\nconst MessageItem: React.FC<{ message: ChatMessage }> = ({ message }) => {\r\n  const isBot = message.sender === 'bot';\r\n  \r\n  return (\r\n    <div className={`${styles.chatbotMessageItem} ${styles[message.sender]}`}>\r\n      {isBot && (\r\n        <div className={`${styles.chatbotMessageAvatar} ${styles.bot}`}>AWS²</div>\r\n      )}\r\n      \r\n      <div className={styles.chatbotMessageBubble}>\r\n        <div className={`${styles.chatbotMessageContent} ${styles[message.sender]}`}>\r\n          {message.message.split('\\n').map((line, index) => (\r\n            <React.Fragment key={index}>\r\n              {line}\r\n              {index < message.message.split('\\n').length - 1 && <br />}\r\n            </React.Fragment>\r\n          ))}\r\n          \r\n          {/* 센서 데이터 표시 (봇 메시지인 경우) */}\r\n          {isBot && message.sensorData && (\r\n            <div className={styles.chatbotSensorData}>\r\n              <div className={styles.chatbotSensorItem}>\r\n                <span>온도:</span>\r\n                <span>{message.sensorData.temperature}°C</span>\r\n              </div>\r\n              <div className={styles.chatbotSensorItem}>\r\n                <span>습도:</span>\r\n                <span>{message.sensorData.humidity}%</span>\r\n              </div>\r\n              <div className={styles.chatbotSensorItem}>\r\n                <span>가스농도:</span>\r\n                <span>{message.sensorData.gasConcentration}ppm</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        <div className={`${styles.chatbotMessageMeta} ${styles[message.sender]}`}>\r\n          <span className={styles.chatbotMessageTime}>\r\n            {ChatbotUtils.formatTime(message.timestamp)}\r\n          </span>\r\n          <div className={styles.chatbotMessageActions}>\r\n            <button className={styles.chatbotMessageActionButton}>\r\n              <MoreHorizontal size={12} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {!isBot && (\r\n        <div className={`${styles.chatbotMessageAvatar} ${styles.user}`}>A</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// 알림 드롭다운 컴포넌트 (Dashboard에서 재사용)\r\nconst NotificationDropdown: React.FC<{ \r\n  isOpen: boolean; \r\n  onClose: () => void; \r\n  notifications: NotificationData['notifications'];\r\n}> = ({ isOpen, onClose, notifications }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.dropdown}>\r\n        <div className={styles.dropdownHeader}>\r\n          <h3 className={styles.dropdownTitle}>알림</h3>\r\n        </div>\r\n        <div className={styles.notificationList}>\r\n          {notifications.length === 0 ? (\r\n            <div className={styles.emptyNotification}>새로운 알림이 없습니다</div>\r\n          ) : (\r\n            notifications.map((notification) => (\r\n              <div \r\n                key={notification.id} \r\n                className={`${styles.notificationItem} ${!notification.read ? styles.notificationItemUnread : ''}`}\r\n              >\r\n                <p className={styles.notificationMessage}>{notification.message}</p>\r\n                <p className={styles.notificationTimestamp}>{notification.timestamp}</p>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n      <button \r\n        onClick={onClose}\r\n        className={styles.dropdownOverlay}\r\n        aria-label=\"알림 닫기\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\n// 관리자 드롭다운 컴포넌트 (Dashboard에서 재사용)\r\nconst AdminDropdown: React.FC<{ isOpen: boolean; onClose: () => void }> = ({ isOpen, onClose }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.adminDropdown}>\r\n        <div className={styles.adminDropdownContent}>\r\n          <button className={styles.adminDropdownItem}>프로필 설정</button>\r\n          <button className={styles.adminDropdownItem}>계정 관리</button>\r\n          <div className={styles.adminDropdownDivider} />\r\n          <button className={`${styles.adminDropdownItem} ${styles.adminDropdownLogout}`}>로그아웃</button>\r\n        </div>\r\n      </div>\r\n      <button \r\n        onClick={onClose}\r\n        className={styles.dropdownOverlay}\r\n        aria-label=\"관리자 메뉴 닫기\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\ninterface ChatbotScreenProps {\r\n  onNavigateBack: () => void;\r\n  onNavigateToHistory: () => void;\r\n  onNavigateToRole?: () => void;\r\n\r\n}\r\n\r\nconst ChatbotScreen: React.FC<ChatbotScreenProps> = ({ onNavigateBack }) => {\r\n  const [chatbotState, setChatbotState] = useState<ChatbotState>({\r\n    messages: [],\r\n    isLoading: false,\r\n    isTyping: false,\r\n    inputMessage: '',\r\n    error: null,\r\n    modelStatus: 'Active'\r\n  });\r\n\r\n  const [notificationData, setNotificationData] = useState<NotificationData>({\r\n    count: 0,\r\n    notifications: []\r\n  });\r\n  \r\n  const [isNotificationOpen, setIsNotificationOpen] = useState(false);\r\n  const [isAdminMenuOpen, setIsAdminMenuOpen] = useState(false);\r\n\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  // 메시지 영역 스크롤을 맨 아래로\r\n  const scrollToBottom = useCallback(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, []);\r\n\r\n  // 메시지 전송\r\n  const sendMessage = useCallback(async () => {\r\n    const message = chatbotState.inputMessage.trim();\r\n    \r\n    // 메시지 검증\r\n    const validation = ChatbotUtils.validateMessage(message);\r\n    if (!validation.isValid) {\r\n      setChatbotState(prev => ({ ...prev, error: validation.error || null }));\r\n      return;\r\n    }\r\n\r\n    // 사용자 메시지 추가\r\n    const userMessage: ChatMessage = {\r\n      id: ChatbotUtils.generateMessageId(),\r\n      message,\r\n      sender: 'user',\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    setChatbotState(prev => ({\r\n      ...prev,\r\n      messages: [...prev.messages, userMessage],\r\n      inputMessage: '',\r\n      isLoading: true,\r\n      isTyping: true,\r\n      error: null\r\n    }));\r\n\r\n    try {\r\n      // API 호출 (개발 시에는 목 응답 사용)\r\n      const response = await ChatbotAPI.generateMockResponse(message);\r\n      \r\n      if ('success' in response && response.success) {\r\n        // 타이핑 효과를 위한 지연\r\n        const typingDelay = ChatbotUtils.calculateTypingDelay(response.reply);\r\n        \r\n        setTimeout(() => {\r\n          const botMessage: ChatMessage = {\r\n            id: ChatbotUtils.generateMessageId(),\r\n            message: response.reply,\r\n            sender: 'bot',\r\n            timestamp: response.timestamp,\r\n            sensorData: response.sensorData,\r\n            status: response.status\r\n          };\r\n\r\n          setChatbotState(prev => ({\r\n            ...prev,\r\n            messages: [...prev.messages, botMessage],\r\n            isLoading: false,\r\n            isTyping: false\r\n          }));\r\n        }, typingDelay);\r\n      } else {\r\n  const msg = 'error' in response ? response.error : 'Unknown error';\r\n  throw new Error(msg);\r\n}\r\n    } catch (error) {\r\n      setChatbotState(prev => ({\r\n        ...prev,\r\n        isLoading: false,\r\n        isTyping: false,\r\n        error: error instanceof Error ? error.message : '답변을 생성할 수 없습니다.'\r\n      }));\r\n    }\r\n  }, [chatbotState.inputMessage]);\r\n\r\n  // 입력 필드 변경 핸들러\r\n  const handleInputChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    const value = e.target.value;\r\n    if (value.length <= 300) {\r\n      setChatbotState(prev => ({ \r\n        ...prev, \r\n        inputMessage: value,\r\n        error: null \r\n      }));\r\n    }\r\n  }, []);\r\n\r\n  // 키보드 이벤트 핸들러\r\n  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      if (!chatbotState.isLoading && chatbotState.inputMessage.trim()) {\r\n        sendMessage();\r\n      }\r\n    }\r\n  }, [chatbotState.isLoading, chatbotState.inputMessage, sendMessage]);\r\n\r\n  // 알림 데이터 가져오기\r\n  const fetchNotifications = useCallback(async () => {\r\n    try {\r\n      const data = await DashboardAPI.getNotifications();\r\n      setNotificationData(data);\r\n    } catch (error) {\r\n      console.error('알림 데이터 가져오기 실패:', error);\r\n    }\r\n  }, []);\r\n\r\n  // 컴포넌트 마운트 시 초기화\r\n  useEffect(() => {\r\n    // 환영 메시지 추가\r\n    const welcomeMessage = ChatbotUtils.createWelcomeMessage();\r\n    setChatbotState(prev => ({\r\n      ...prev,\r\n      messages: [welcomeMessage]\r\n    }));\r\n\r\n    // 알림 데이터 가져오기\r\n    fetchNotifications();\r\n\r\n    // 입력 필드에 포커스\r\n    setTimeout(() => {\r\n      inputRef.current?.focus();\r\n    }, 100);\r\n  }, [fetchNotifications]);\r\n\r\n  // 메시지 추가 시 스크롤\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [chatbotState.messages, chatbotState.isTyping, scrollToBottom]);\r\n\r\n  // 메시지 히스토리 저장\r\n  useEffect(() => {\r\n    if (chatbotState.messages.length > 0) {\r\n      ChatbotUtils.saveMessageHistory(chatbotState.messages);\r\n    }\r\n  }, [chatbotState.messages]);\r\n\r\n  const canSend = chatbotState.inputMessage.trim().length > 0 && !chatbotState.isLoading;\r\n  const charCount = chatbotState.inputMessage.length;\r\n  const charCountClass = charCount > 250 ? 'error' : charCount > 200 ? 'warning' : '';\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      {/* 사이드바 */}\r\n      <div className={sidebarStyles.sidebar}>\r\n        <div className={sidebarStyles.logoSection}>\r\n          <div className={sidebarStyles.logoContainer}>\r\n            <div className={styles.logoMain}>AWS²</div>\r\n            <div className={styles.logoAccent}>GIoT</div>\r\n          </div>\r\n          <div className={sidebarStyles.logoSubtext}>IoT Cloud System</div>\r\n        </div>\r\n\r\n        <nav className={sidebarStyles.navigation}>\r\n          <button className={sidebarStyles.sidebarItem} onClick={onNavigateBack}>\r\n            <span><MessageCircle size={20} /></span>\r\n            <span>Dashboard</span>\r\n          </button>\r\n          <button className={`${sidebarStyles.sidebarItem} ${sidebarStyles.sidebarItemActive}`}>\r\n            <span><MessageCircle size={20} /></span>\r\n            <span>Chatbot</span>\r\n          </button>\r\n          <button className={sidebarStyles.sidebarItem}>\r\n            <span><MessageCircle size={20} /></span>\r\n            <span>History</span>\r\n          </button>\r\n          <button className={sidebarStyles.sidebarItem}>\r\n            <span><MessageCircle size={20} /></span>\r\n            <span>Settings</span>\r\n          </button>\r\n          <button className={sidebarStyles.sidebarItem}>\r\n            <span><MessageCircle size={20} /></span>\r\n            <span>Logout</span>\r\n          </button>\r\n        </nav>\r\n\r\n        <div className={sidebarStyles.sidebarFooter}>\r\n          <div className={sidebarStyles.footerText}>2025 GBSA AWS</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 메인 컨텐츠 영역 */}\r\n      <div className={styles.mainContent}>\r\n        {/* 상단 헤더 */}\r\n        <header className={styles.header}>\r\n          <div className={styles.headerContent}>\r\n            <div>\r\n              <h1 className={styles.headerTitle}>Chatbot</h1>\r\n              <p className={styles.headerSubtitle}>{new Date().toLocaleString('ko-KR')}</p>\r\n            </div>\r\n            \r\n            <div className={styles.headerActions}>\r\n              {/* 알림 아이콘 */}\r\n              <div className={styles.notificationContainer}>\r\n                <button\r\n                  onClick={() => {\r\n                    setIsNotificationOpen(!isNotificationOpen);\r\n                    setIsAdminMenuOpen(false);\r\n                  }}\r\n                  className={styles.notificationButton}\r\n                >\r\n                  <Bell size={24} />\r\n                  {notificationData.count > 0 && (\r\n                    <span className={styles.notificationBadge}>\r\n                      {notificationData.count > 99 ? '99+' : notificationData.count}\r\n                    </span>\r\n                  )}\r\n                </button>\r\n                \r\n                <NotificationDropdown\r\n                  isOpen={isNotificationOpen}\r\n                  onClose={() => setIsNotificationOpen(false)}\r\n                  notifications={notificationData.notifications}\r\n                />\r\n              </div>\r\n\r\n              {/* 관리자 프로필 */}\r\n              <div className={styles.adminContainer}>\r\n                <button\r\n                  onClick={() => {\r\n                    setIsAdminMenuOpen(!isAdminMenuOpen);\r\n                    setIsNotificationOpen(false);\r\n                  }}\r\n                  className={styles.adminButton}\r\n                >\r\n                  <div className={styles.adminAvatar}>\r\n                    <User size={18} style={{ color: 'white' }} />\r\n                  </div>\r\n                  <span className={styles.adminLabel}>Admin</span>\r\n                </button>\r\n                \r\n                <AdminDropdown\r\n                  isOpen={isAdminMenuOpen}\r\n                  onClose={() => setIsAdminMenuOpen(false)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {/* 챗봇 메인 영역 */}\r\n        <div className={styles.chatbotContainer}>\r\n          {/* 챗봇 헤더 */}\r\n          <div className={styles.chatbotHeader}>\r\n            <div className={styles.chatbotHeaderLeft}>\r\n              <button \r\n                className={styles.chatbotBackButton}\r\n                onClick={onNavigateBack}\r\n                aria-label=\"뒤로 가기\"\r\n              >\r\n                <ChevronLeft size={20} />\r\n              </button>\r\n              \r\n              <div className={styles.chatbotModelInfo}>\r\n                <div className={styles.chatbotModelName}>Model Name</div>\r\n                <div className={styles.chatbotModelStatus}>\r\n                  <span className={`${styles.chatbotStatusBadge} ${styles[`chatbotStatus${chatbotState.modelStatus}`]}`}>\r\n                    {chatbotState.modelStatus}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className={styles.chatbotHeaderActions}>\r\n              <button className={styles.chatbotActionButton} aria-label=\"인쇄\">\r\n                <Printer size={18} />\r\n              </button>\r\n              <button className={styles.chatbotActionButton} aria-label=\"즐겨찾기\">\r\n                <Star size={18} />\r\n              </button>\r\n              <button className={styles.chatbotActionButton} aria-label=\"삭제\">\r\n                <Trash2 size={18} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* 메시지 영역 */}\r\n          <div className={styles.chatbotMessagesContainer}>\r\n            <div className={styles.chatbotMessages}>\r\n              {chatbotState.messages.map((message) => (\r\n                <MessageItem key={message.id} message={message} />\r\n              ))}\r\n              \r\n              {chatbotState.isTyping && <TypingIndicator />}\r\n              \r\n              <div ref={messagesEndRef} />\r\n            </div>\r\n          </div>\r\n\r\n          {/* 에러 메시지 */}\r\n          {chatbotState.error && (\r\n            <div className={styles.chatbotErrorMessage}>\r\n              {chatbotState.error}\r\n            </div>\r\n          )}\r\n\r\n          {/* 입력 영역 */}\r\n          <div className={styles.chatbotInputContainer}>\r\n            <div className={styles.chatbotInputWrapper}>\r\n              <button \r\n                className={styles.chatbotAttachButton}\r\n                aria-label=\"파일 첨부\"\r\n              >\r\n                <Paperclip size={18} />\r\n              </button>\r\n              \r\n              <div style={{ position: 'relative', flex: 1 }}>\r\n                <textarea\r\n                  ref={inputRef}\r\n                  className={styles.chatbotInputField}\r\n                  value={chatbotState.inputMessage}\r\n                  onChange={handleInputChange}\r\n                  onKeyDown={handleKeyDown}\r\n                  placeholder=\"Write message\"\r\n                  rows={1}\r\n                  disabled={chatbotState.isLoading}\r\n                />\r\n                <div className={`${styles.chatbotCharCounter} ${charCountClass}`}>\r\n                  {charCount}/300\r\n                </div>\r\n              </div>\r\n              \r\n              <button \r\n                className={styles.chatbotSendButton}\r\n                onClick={sendMessage}\r\n                disabled={!canSend}\r\n                aria-label=\"메시지 전송\"\r\n              >\r\n                <Send size={18} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatbotScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}